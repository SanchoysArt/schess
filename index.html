<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Glass Arcade</title>

<style>
:root{
  --glass:rgba(255,255,255,.12);
  --accent:#fff;
}

*{box-sizing:border-box;font-family:system-ui,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#111,#000);
  color:white;
  display:flex;
  align-items:center;
  justify-content:center;
}

.app{
  width:95%;
  max-width:420px;
  background:var(--glass);
  backdrop-filter:blur(22px);
  border-radius:24px;
  padding:16px;
  border:1px solid rgba(255,255,255,.2);
  box-shadow:0 0 60px rgba(255,255,255,.15);
}

h1{
  text-align:center;
  font-weight:300;
  letter-spacing:4px;
  margin:8px 0 12px;
}

.menu{
  display:flex;
  gap:8px;
  margin-bottom:12px;
}

button{
  flex:1;
  padding:12px;
  background:transparent;
  border:1px solid rgba(255,255,255,.5);
  border-radius:14px;
  color:white;
  font-size:14px;
  transition:.25s;
}

button:active{
  transform:scale(.95);
  background:white;
  color:black;
}

.hidden{display:none}

/* ===== STATUS ===== */
.status{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  opacity:.9;
  margin-bottom:8px;
}

/* ===== MINES ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,22px);
  gap:6px;
  justify-content:center;
}

.cell{
  width:22px;
  height:22px;
  border-radius:6px;
  background:rgba(255,255,255,.15);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  transition:.2s;
}

.cell:active{transform:scale(.85)}

.cell.open{
  background:white;
  color:black;
}

.cell.mine{
  background:white;
  background-image:radial-gradient(circle at 30% 30%,#000 20%,transparent 21%),
                   radial-gradient(circle at 60% 60%,#000 20%,transparent 21%);
}

/* ===== MODAL ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
}

.overlay.show{display:flex}

.modal{
  background:var(--glass);
  backdrop-filter:blur(20px);
  padding:24px;
  border-radius:20px;
  text-align:center;
}
</style>
</head>

<body>

<div class="app">
  <h1>GLASS ARCADE</h1>

  <div class="menu">
    <button onclick="show('mines')">Сапёр</button>
    <button onclick="show('ttt')">Крестики</button>
  </div>

<!-- ===== MINES ===== -->
<div id="mines" class="hidden">
  <div class="status">
    <span id="score">Очки: 0</span>
    <span id="left">Мины: 0</span>
  </div>

  <div class="menu">
    <button onclick="startMines(10,15)">Лёгкий</button>
    <button onclick="startMines(12,25)">Средний</button>
    <button onclick="startMines(14,40)">Сложный</button>
  </div>

  <div id="field" class="grid"></div>
</div>

<!-- ===== TTT ===== -->
<div id="ttt" class="hidden">
  <p style="text-align:center;opacity:.8">Ты ❌</p>
  <div id="tttGrid" class="grid" style="grid-template-columns:repeat(3,1fr);gap:10px"></div>
</div>
</div>

<div id="overlay" class="overlay">
  <div class="modal">
    <h2 id="msg"></h2>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
/* ===== UI ===== */
function show(id){
  document.querySelectorAll('#mines,#ttt').forEach(e=>e.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function modal(t){
  msg.textContent=t;
  overlay.classList.add('show');
}
function closeModal(){overlay.classList.remove('show')}

/* ===== MINES ===== */
let board,size,opened,over,score,minesCount;

function startMines(s,m){
  size=s; minesCount=m;
  board=Array(s*s).fill(0);
  opened=0; score=0; over=false;
  field.innerHTML='';
  field.style.gridTemplateColumns=`repeat(${s},22px)`;
  scoreEl(); left.textContent=`Мины: ${m}`;

  while(m){
    let i=Math.random()*board.length|0;
    if(board[i]!=='M'){board[i]='M';m--}
  }

  for(let i=0;i<board.length;i++){
    if(board[i]==='M')continue;
    let n=0;
    for(let dx=-1;dx<=1;dx++)
    for(let dy=-1;dy<=1;dy++){
      let x=i%size+dx,y=(i/size|0)+dy;
      let j=y*size+x;
      if(x>=0&&y>=0&&x<size&&y<size&&board[j]==='M')n++;
    }
    board[i]=n;
  }

  for(let i=0;i<board.length;i++){
    let d=document.createElement('div');
    d.className='cell';
    d.onclick=()=>openCell(i,d);
    field.appendChild(d);
  }
}

function scoreEl(){scoreSpan.textContent=`Очки: ${score}`}

const scoreSpan=document.getElementById('score');

function openCell(i,d){
  if(over||d.classList.contains('open'))return;
  d.classList.add('open');

  if(board[i]==='M'){
    d.classList.add('mine');
    score-=50;
    reveal();
    modal('Бомба');
    over=true;
    scoreEl();
    return;
  }

  score+=10; scoreEl();
  opened++;
  if(board[i])d.textContent=board[i];
  if(opened===board.filter(v=>v!=='M').length){
    modal('Победа');
    over=true;
  }
}

function reveal(){
  field.childNodes.forEach((c,i)=>{
    if(board[i]==='M')c.classList.add('mine');
    else if(board[i]&&!c.classList.contains('open')){
      c.classList.add('open');
      c.textContent=board[i];
    }
  });
}
</script>
</body>
</html>