<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>BW Translator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<style>
* { box-sizing:border-box }

body {
  margin:0;
  font-family: system-ui, sans-serif;
  background:black;
  color:white;
  overflow:hidden;
}

/* === –§–û–ù === */
.bg {
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, #fff2 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, #fff3 0%, transparent 40%);
  animation: pulse 6s infinite alternate;
}
@keyframes pulse {
  from { filter:blur(40px) brightness(1); }
  to   { filter:blur(60px) brightness(1.4); }
}

/* === –ú–ï–ù–Æ === */
.menu {
  position:fixed;
  top:20px;
  left:20px;
  font-size:28px;
  cursor:pointer;
  z-index:10;
}

.menu-panel {
  position:fixed;
  top:70px;
  left:20px;
  background:#000;
  border:1px solid #fff;
  padding:15px;
  display:none;
}
.menu-panel div {
  padding:8px 0;
  cursor:pointer;
  opacity:.7;
}
.menu-panel div:hover {
  opacity:1;
}

/* === –û–°–ù–û–í–ê === */
.app {
  position:relative;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.columns {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  width:90%;
  max-width:1200px;
}

.card {
  background:#000;
  border:1px solid #fff;
  padding:20px;
  animation:flicker 4s infinite;
}
@keyframes flicker {
  0%,100%{opacity:1}
  50%{opacity:.85}
}

select, textarea, button {
  width:100%;
  background:black;
  color:white;
  border:1px solid #fff;
  padding:12px;
  margin-top:10px;
  font-size:16px;
}

textarea {
  min-height:200px;
  resize:none;
}

button {
  cursor:pointer;
  transition:.3s;
}
button:hover {
  background:white;
  color:black;
}

/* === –§–û–¢–û === */
img {
  max-width:100%;
  border:1px solid #fff;
}

.overlay {
  position:relative;
}
.overlay-text {
  position:absolute;
  inset:0;
  color:white;
  white-space:pre-wrap;
  pointer-events:none;
  mix-blend-mode:screen;
}
</style>
</head>

<body>

<div class="bg"></div>

<div class="menu" onclick="toggleMenu()">‚ò∞</div>
<div class="menu-panel" id="menu">
  <div onclick="mode='text'">–¢–µ–∫—Å—Ç</div>
  <div onclick="voice()">–ì–æ–ª–æ—Å</div>
  <div onclick="mode='photo'">–§–æ—Ç–æ</div>
</div>

<div class="app">

<div class="columns">

<!-- –õ–ï–í–ê–Ø -->
<div class="card">
  <select id="sourceLang">
    <option value="auto">–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</option>
  </select>

  <textarea id="inputText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç"></textarea>
  <button onclick="voice()">üé§ –ì–æ–≤–æ—Ä–∏—Ç—å</button>
</div>

<!-- –ü–†–ê–í–ê–Ø -->
<div class="card">
  <select id="targetLang">
    <option value="en">English</option>
    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
    <option value="de">Deutsch</option>
    <option value="fr">Fran√ßais</option>
  </select>

  <textarea id="outputText" placeholder="–ü–µ—Ä–µ–≤–æ–¥" readonly></textarea>
  <button onclick="translate()">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
</div>

</div>
</div>

<script>
let mode = "text";
const api = "https://libretranslate.de";

function toggleMenu(){
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

async function translate(){
  if(!inputText.value) return;
  const res = await fetch(api+"/translate",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      q:inputText.value,
      source:"auto",
      target:targetLang.value
    })
  });
  const data = await res.json();
  outputText.value = data.translatedText;
}

function voice(){
  const r = new webkitSpeechRecognition();
  r.lang="auto";
  r.onresult=e=>inputText.value=e.results[0][0].transcript;
  r.start();
}
</script>

</body>
</html>