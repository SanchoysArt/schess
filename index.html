<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Glass Arcade</title>

<style>
:root {
  --white: #fff;
  --glass: rgba(255,255,255,0.08);
}

* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at top, #111, #000);
  color: var(--white);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: breathe 10s ease-in-out infinite;
}

@keyframes breathe {
  0% { filter: brightness(0.9); }
  50% { filter: brightness(1.05); }
  100% { filter: brightness(0.9); }
}

.glass {
  background: var(--glass);
  backdrop-filter: blur(20px);
  border-radius: 26px;
  padding: 32px;
  width: 90%;
  max-width: 900px;
  border: 1px solid rgba(255,255,255,.15);
  box-shadow: 0 0 80px rgba(255,255,255,.15);
}

h1 {
  text-align: center;
  font-weight: 300;
  letter-spacing: 6px;
  margin-bottom: 10px;
}

p {
  opacity: 0.8;
  text-align: center;
}

.menu {
  display: flex;
  gap: 16px;
  justify-content: center;
  margin: 20px 0;
  flex-wrap: wrap;
}

button {
  background: transparent;
  color: white;
  border: 1px solid white;
  padding: 10px 22px;
  border-radius: 14px;
  cursor: pointer;
  transition: all .4s ease;
}

button:hover {
  background: white;
  color: black;
  box-shadow: 0 0 20px white;
}

.hidden { display: none; }

/* ===== MINES ===== */
.grid {
  display: grid;
  gap: 6px;
  justify-content: center;
  margin-top: 20px;
}

.cell {
  width: 34px;
  height: 34px;
  border-radius: 8px;
  background: rgba(255,255,255,.08);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all .35s ease;
}

.cell:hover {
  background: rgba(255,255,255,.18);
}

.cell.open {
  background: rgba(255,255,255,.9);
  color: black;
  animation: pop .25s ease;
}

.cell.mine {
  background: white;
  color: black;
  animation: flash .6s infinite alternate;
}

@keyframes pop {
  from { transform: scale(.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes flash {
  from { opacity: 1; }
  to { opacity: .4; }
}

/* ===== TTT ===== */
.ttt {
  display: grid;
  grid-template-columns: repeat(3, 100px);
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}

.ttt div {
  height: 100px;
  border-radius: 20px;
  background: rgba(255,255,255,.08);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 48px;
  cursor: pointer;
  transition: all .4s ease;
}

.ttt div:hover {
  background: rgba(255,255,255,.2);
}

.win {
  background: white !important;
  color: black;
  animation: flash .5s infinite alternate;
}
</style>
</head>

<body>
<div class="glass">
  <h1>GLASS ARCADE</h1>
  <p>Минималистичные игры. Чёткая логика. Glass UI.</p>

  <div class="menu">
    <button onclick="show('mines')">Сапёр</button>
    <button onclick="show('ttt')">Крестики-нолики</button>
  </div>

  <!-- MINES -->
  <div id="mines" class="hidden">
    <p>
      <b>Правила:</b> открой все безопасные клетки.  
      Цифра — количество мин вокруг. Мина = поражение.
    </p>
    <div class="menu">
      <button onclick="startMines(8,10)">Лёгкий</button>
      <button onclick="startMines(12,25)">Средний</button>
      <button onclick="startMines(16,45)">Сложный</button>
    </div>
    <div id="field" class="grid"></div>
  </div>

  <!-- TTT -->
  <div id="ttt" class="hidden">
    <p>
      <b>Правила:</b> собери линию из 3 ❌.  
      ⭕ — компьютер.
    </p>
    <button onclick="startTTT()">Начать игру</button>
    <div id="tttGrid" class="ttt"></div>
  </div>
</div>

<script>
/* ===== MENU ===== */
function show(id) {
  document.querySelectorAll('#mines,#ttt')
    .forEach(e => e.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* ===== MINES LOGIC ===== */
let mines, size, opened, gameOver;

function startMines(s, count) {
  size = s;
  opened = 0;
  gameOver = false;
  const field = document.getElementById('field');
  field.innerHTML = '';
  field.style.gridTemplateColumns = `repeat(${s},34px)`;

  mines = Array(s*s).fill(0);

  let placed = 0;
  while (placed < count) {
    let i = Math.floor(Math.random()*mines.length);
    if (mines[i] !== 'M') {
      mines[i] = 'M';
      placed++;
    }
  }

  for (let i = 0; i < mines.length; i++) {
    if (mines[i] === 'M') continue;
    let c = 0;
    for (let dx=-1; dx<=1; dx++)
      for (let dy=-1; dy<=1; dy++) {
        let x = i % size + dx;
        let y = Math.floor(i/size) + dy;
        let n = y*size + x;
        if (x>=0 && y>=0 && x<size && y<size && mines[n]==='M') c++;
      }
    mines[i] = c;
  }

  for (let i = 0; i < mines.length; i++) {
    const d = document.createElement('div');
    d.className = 'cell';
    d.onclick = () => openCell(i, d);
    field.appendChild(d);
  }
}

function openCell(i, d) {
  if (gameOver || d.classList.contains('open')) return;

  if (mines[i] === 'M') {
    d.classList.add('mine');
    d.textContent = '✕';
    gameOver = true;
    return;
  }

  d.classList.add('open');
  opened++;
  if (mines[i] > 0) d.textContent = mines[i];
  else flood(i);

  if (opened === mines.filter(v => v !== 'M').length) {
    gameOver = true;
    alert('Победа!');
  }
}

function flood(i) {
  for (let dx=-1; dx<=1; dx++)
    for (let dy=-1; dy<=1; dy++) {
      let x = i % size + dx;
      let y = Math.floor(i/size) + dy;
      let n = y*size + x;
      if (x>=0 && y>=0 && x<size && y<size) {
        const cell = document.getElementById('field').children[n];
        if (!cell.classList.contains('open')) openCell(n, cell);
      }
    }
}

/* ===== TTT LOGIC ===== */
let ttt, tttActive;
const wins = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function startTTT() {
  ttt = Array(9).fill('');
  tttActive = true;
  const g = document.getElementById('tttGrid');
  g.innerHTML = '';

  for (let i = 0; i < 9; i++) {
    const c = document.createElement('div');
    c.onclick = () => playerMove(i, c);
    g.appendChild(c);
  }
}

function playerMove(i, cell) {
  if (!tttActive || ttt[i]) return;

  ttt[i] = 'X';
  cell.textContent = 'X';

  if (checkWin('X')) return endTTT('Ты победил');
  if (ttt.every(v => v)) return endTTT('Ничья');

  aiMove();
}

function aiMove() {
  if (!tttActive) return;
  let empty = ttt.map((v,i)=>v===''?i:null).filter(v=>v!=null);
  let move = empty[Math.floor(Math.random()*empty.length)];
  ttt[move] = 'O';
  document.getElementById('tttGrid').children[move].textContent = 'O';

  if (checkWin('O')) endTTT('Поражение');
}

function checkWin(p) {
  for (let w of wins) {
    if (w.every(i => ttt[i] === p)) {
      w.forEach(i =>
        document.getElementById('tttGrid').children[i].classList.add('win')
      );
      tttActive = false;
      return true;
    }
  }
  return false;
}

function endTTT(msg) {
  tttActive = false;
  setTimeout(()=>alert(msg), 100);
}
</script>
</body>
</html>