<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Glass Arcade</title>

<style>
:root{
  --glass:rgba(255,255,255,.12);
  --border:rgba(255,255,255,.25);
}

*{box-sizing:border-box;font-family:system-ui,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#111,#000);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
}

.app{
  width:95%;
  max-width:420px;
  background:var(--glass);
  backdrop-filter:blur(22px);
  border-radius:24px;
  padding:16px;
  border:1px solid var(--border);
  box-shadow:0 0 60px rgba(255,255,255,.15);
}

h1{
  text-align:center;
  font-weight:300;
  letter-spacing:4px;
  margin:6px 0 12px;
}

/* ===== COMMON ===== */
.menu{
  display:flex;
  gap:8px;
  margin-bottom:10px;
}

button{
  flex:1;
  padding:12px;
  background:transparent;
  border:1px solid var(--border);
  border-radius:14px;
  color:white;
  font-size:14px;
  transition:.2s;
}

button:active{
  transform:scale(.95);
  background:white;
  color:black;
}

.hidden{display:none}

/* ===== MODAL ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
}

.overlay.show{display:flex}

.modal{
  background:var(--glass);
  backdrop-filter:blur(20px);
  padding:24px;
  border-radius:20px;
  text-align:center;
  border:1px solid var(--border);
}

/* ===== MINES ===== */
.status{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-bottom:6px;
  opacity:.9;
}

.grid{
  display:grid;
  gap:6px;
  justify-content:center;
}

.mine-grid{
  grid-template-columns:repeat(auto-fill,22px);
}

.cell{
  width:22px;
  height:22px;
  border-radius:6px;
  background:rgba(255,255,255,.18);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  transition:.15s;
}

.cell:active{transform:scale(.85)}

.cell.open{
  background:white;
  color:black;
}

.cell.mine{
  background:white;
  background-image:
    radial-gradient(circle at 30% 30%,#000 22%,transparent 23%),
    radial-gradient(circle at 65% 65%,#000 22%,transparent 23%);
}

/* ===== TTT ===== */
.ttt-grid{
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.ttt-cell{
  aspect-ratio:1;
  border-radius:16px;
  background:rgba(255,255,255,.18);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:42px;
}

.win{
  background:white!important;
  color:black;
}
</style>
</head>

<body>

<div class="app">
  <h1>GLASS ARCADE</h1>

  <div class="menu">
    <button onclick="showGame('mines')">–°–∞–ø—ë—Ä</button>
    <button onclick="showGame('ttt')">–ö—Ä–µ—Å—Ç–∏–∫–∏</button>
  </div>

<!-- ===== MINES ===== -->
<div id="mines" class="hidden">
  <div class="status">
    <span id="score">–û—á–∫–∏: 0</span>
    <span id="minesLeft">–ú–∏–Ω—ã: 0</span>
  </div>

  <div class="menu">
    <button onclick="startMines(10,15)">–õ—ë–≥–∫–∏–π</button>
    <button onclick="startMines(12,25)">–°—Ä–µ–¥–Ω–∏–π</button>
    <button onclick="startMines(14,40)">–°–ª–æ–∂–Ω—ã–π</button>
  </div>

  <div id="mineField" class="grid mine-grid"></div>
</div>

<!-- ===== TTT ===== -->
<div id="ttt" class="hidden">
  <div class="menu">
    <button onclick="setDiff(0)">–õ—ë–≥–∫–∏–π</button>
    <button onclick="setDiff(1)">–°—Ä–µ–¥–Ω–∏–π</button>
    <button onclick="setDiff(2)">–°–ª–æ–∂–Ω—ã–π</button>
  </div>

  <button onclick="startTTT()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
  <div id="tttGrid" class="grid ttt-grid"></div>
</div>
</div>

<div id="overlay" class="overlay">
  <div class="modal">
    <h2 id="modalText"></h2>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
/* ===== UI ===== */
function showGame(id){
  document.querySelectorAll('#mines,#ttt').forEach(e=>e.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
function showModal(t){
  modalText.textContent=t;
  overlay.classList.add('show');
}
function closeModal(){overlay.classList.remove('show')}

/* ===== MINES ===== */
let board,size,opened,over,score;

function startMines(s,m){
  size=s; opened=0; score=0; over=false;
  board=Array(s*s).fill(0);
  mineField.innerHTML='';
  mineField.style.gridTemplateColumns=`repeat(${s},22px)`;
  scoreEl(); minesLeft.textContent=`–ú–∏–Ω—ã: ${m}`;

  while(m){
    let i=Math.random()*board.length|0;
    if(board[i]!=='M'){board[i]='M';m--}
  }

  for(let i=0;i<board.length;i++){
    if(board[i]==='M')continue;
    let n=0;
    for(let dx=-1;dx<=1;dx++)
    for(let dy=-1;dy<=1;dy++){
      let x=i%size+dx,y=(i/size|0)+dy;
      let j=y*size+x;
      if(x>=0&&y>=0&&x<size&&y<size&&board[j]==='M')n++;
    }
    board[i]=n;
  }

  for(let i=0;i<board.length;i++){
    let d=document.createElement('div');
    d.className='cell';
    d.onclick=()=>openCell(i,d);
    mineField.appendChild(d);
  }
}

function scoreEl(){scoreSpan.textContent=`–û—á–∫–∏: ${score}`}

const scoreSpan=document.getElementById('score');

function openCell(i,d){
  if(over||d.classList.contains('open'))return;
  d.classList.add('open');

  if(board[i]==='M'){
    d.classList.add('mine');
    score-=50;
    revealAll();
    scoreEl();
    showModal('–ë–æ–º–±–∞ üí£');
    over=true;
    return;
  }

  score+=10; scoreEl();
  opened++;
  if(board[i]) d.textContent=board[i];
  else flood(i);

  if(opened===board.filter(v=>v!=='M').length){
    showModal('–ü–æ–±–µ–¥–∞ üéâ');
    over=true;
  }
}

function flood(i){
  for(let dx=-1;dx<=1;dx++)
  for(let dy=-1;dy<=1;dy++){
    let x=i%size+dx,y=(i/size|0)+dy;
    let j=y*size+x;
    if(x>=0&&y>=0&&x<size&&y<size){
      let c=mineField.children[j];
      if(!c.classList.contains('open')) openCell(j,c);
    }
  }
}

function revealAll(){
  mineField.childNodes.forEach((c,i)=>{
    if(board[i]==='M') c.classList.add('mine');
    else if(board[i] && !c.classList.contains('open')){
      c.classList.add('open');
      c.textContent=board[i];
    }
  });
}

/* ===== TTT ===== */
let ttt=[],active=false,diff=0;
const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function setDiff(d){diff=d}

function startTTT(){
  ttt=Array(9).fill('');
  active=true;
  tttGrid.innerHTML='';
  for(let i=0;i<9;i++){
    let c=document.createElement('div');
    c.className='ttt-cell';
    c.onclick=()=>move(i,c);
    tttGrid.appendChild(c);
  }
}

function move(i,c){
  if(!active||ttt[i])return;
  ttt[i]='X'; c.textContent='X';
  if(check('X')) return end('–¢—ã –ø–æ–±–µ–¥–∏–ª');
  if(ttt.every(v=>v)) return end('–ù–∏—á—å—è');
  setTimeout(aiMove,350);
}

function aiMove(){
  if(!active)return;
  let m=diff===0?random():diff===1?smart():minimax(ttt,'O').i;
  ttt[m]='O';
  tttGrid.children[m].textContent='O';
  if(check('O')) end('–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª');
}

function random(){
  return ttt.map((v,i)=>v==''?i:null).filter(v=>v!=null)
    [Math.random()*9|0];
}

function smart(){
  for(let w of wins)
    for(let p of ['O','X']){
      let e=w.find(i=>ttt[i]=='');
      if(w.filter(i=>ttt[i]==p).length==2 && e!=undefined) return e;
    }
  return random();
}

function minimax(b,p){
  if(checkState(b,'X')) return {s:-1};
  if(checkState(b,'O')) return {s:1};
  if(b.every(v=>v)) return {s:0};
  let best={s:p=='O'?-2:2};
  for(let i=0;i<9;i++){
    if(!b[i]){
      b[i]=p;
      let r=minimax(b,p=='O'?'X':'O');
      b[i]='';
      r.i=i;
      if((p=='O'&&r.s>best.s)||(p=='X'&&r.s<best.s)) best=r;
    }
  }
  return best;
}

function check(p){
  for(let w of wins)
    if(w.every(i=>ttt[i]==p)){
      w.forEach(i=>tttGrid.children[i].classList.add('win'));
      active=false;
      return true;
    }
}

function checkState(b,p){
  return wins.some(w=>w.every(i=>b[i]==p));
}

function end(t){
  active=false;
  showModal(t);
}
</script>
</body>
</html>